
{clean_files, ["test-ebin", "priv/bin/*"]}.

{deps, [
    {rebar, ".*",
        {git, "https://github.com/hyperthunk/rebar.git", {branch, "systest"}}},

    %% NB: we don't *care* about the version as it's only used to build the
    %% documentation for parse_trans - we require explicitly so that users
    %% behind proxies not configured for git:// or ssh:// can fetch it!
    {edown, ".*",
        {git, "https://github.com/esl/edown.git"}},

    {parse_trans, "2.3-14-gf84867a",
        {git, "https://github.com/esl/parse_trans.git", "f84867ab1a"}}
]}.

{post_hooks, [
    {escriptize, "mv priv/bin/systest "
                 "\"priv/bin/systest-`git describe --abbrev=0 |"
                 " sed 's/v//g'`-SNAPSHOT\""}
]}.

{plugins, [build_escript,systest_rebar]}.

{escript_incl_apps, [rebar, systest]}.

{escript_name, "priv/bin/systest"}.
{escript_comment,
"%% ----------------------------------------------------------------------------"
"%%"
"%% Copyright (c) 2005 - 2012 Nebularis."
"%%"
"%% Permission is hereby granted, free of charge, to any person obtaining a copy"
"%% of this software and associated documentation files (the \"Software\"), deal"
"%% in the Software without restriction, including without limitation the rights"
"%% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell"
"%% copies of the Software, and to permit persons to whom the Software is"
"%% furnished to do so, subject to the following conditions:"
"%%"
"%% The above copyright notice and this permission notice shall be included in"
"%% all copies or substantial portions of the Software."
"%%"
"%% THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR"
"%% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,"
"%% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE"
"%% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER"
"%% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING"
"%% FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS"
"%% IN THE SOFTWARE."
"%% ----------------------------------------------------------------------------"}.

